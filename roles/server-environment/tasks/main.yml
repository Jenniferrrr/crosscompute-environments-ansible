---
- name: include variables
  include_vars: '{{ item }}'
  with_first_found:
    - '{{ ansible_os_family }}.yml'
    - 'RedHat.yml'

- name: install system packages
  package: name={{ item }} state=present
  become: true
  with_items:
    - '{{ redis }}'
    - firewalld
    - nginx
    - nodejs
    - npm
    - policycoreutils-python-utils
    - rubygems

- name: install node packages
  npm: name={{ item }} state=present global=yes
  become: true
  with_items:
    - browserify
    - socket.io
    - uglify-js

- name: install ruby packages
  gem: name={{ item }} state=present
  become: true
  with_items:
    - sass

- name: install python packages
  pip: name={{ item }} virtualenv={{ virtualenv_folder }}
  become: true
  become_user: '{{ target_user }}'
  with_items:
    - archiveIO
    - arrow
    - dogpile.cache
    - flask
    - imapIO
    - msgpack-python
    - pyramid
    - pyramid_debugtoolbar
    - pyramid_ipython
    - pyramid_tm
    - pyzmq
    - socketIO-client
    - sphinx
    - sqlalchemy
    - uwsgi
    - velruse
    - voluptuous
    - whenIO
    - zope.sqlalchemy
